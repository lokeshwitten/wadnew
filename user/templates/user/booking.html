<!DOCTYPE html>

<head>
    <meta charset="UTF-8">

    <title>Reserve your table</title>


    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" crossorigin="anonymous">
    


</head>


<body>
    <div class="jumbotron ">
        <div class="container text-center bookTable ">
            <h1 class="upper-case">Book Your Table</h1>
            <h2>Restaurant : {{name}}</h2>
            <h2 id='no_tables'>Tables available  in the choosen Time slot: {{no}}</h2>
            <h2 id='msg' style="color: red;"></h2>



        </div>
    </div>





    <form action="{% url 'user:confirmres' %}" class="form-horizontal customerForm" method="post">
        {% csrf_token %}
        <div class="form-group col-md-6 col-lg-6 col-sm-12">
            <label for="user-name" class="col-lg-2 control-label">Name</label>
            <div class="col-lg-10">
                <div class="input-group">
                    <span class="input-group-addon glyphicon glyphicon-user"></span>
                    <input type="text" class="form-control" name="name" id="user-name" placeholder="Enter you name" required>

                </div>

            </div>
        </div>
        <!-- End form group -->


        <div class="form-group col-md-6 col-lg-6 col-sm-12">
            <label for="phone" class="col-lg-2 control-label">Contact</label>
            <div class="col-lg-10">
                <div class="input-group">
                    <span class="input-group-addon glyphicon glyphicon-earphone"></span>
                    <input type="tel" class="form-control" name="phoneno" id="phone" placeholder="Phone Number" required>

                </div>
            </div>
        </div>


        <div class="row">
            <div class="col-lg-3 col-md-3"></div>
            <div class="form-group  col-md-6 col-lg-6 col-sm-12">
                <label for="party" class="col-lg-2 control-label">No of tables</label>
                <div class="col-lg-10">
                    <div class="input-group">
                        <span class="input-group-addon glyphicon glyphicon-hand-right"></span>
                        <input type="tel" class="form-control" name="no" id="tables" placeholder="Enter No of tables" required>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-3"></div>
        </div>





       

        


        <div class="row">
            <div class="col-lg-3 col-md-3"></div>
            <div class="form-group  col-md-6 col-lg-6 col-sm-12">
                <label for="user-message" class="col-lg-2 control-label">Message</label>
                <div class="col-lg-10">
                    <textarea name="user-message" id="user-message" name="message" class="form-control" cols="5" rows="10" placeholder="Enter your Special needs"></textarea>
                </div>
            </div>
            <div class="col-lg-3 col-md-3"></div>
        </div>

        <input id="capacity" type="hidden" value="{{no}}">


        <div class=" col-lg-12 form-group text-center">
            
            <input  id="submit" type="submit" value="Submit">
            
            <!--Modal to display the confirmation code-->

            <!--<div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">-->
            <!--<div class="modal-dialog modal-sm">-->
            <!--<div class="modal-content" id="op"  >-->
            <!--...-->
            <!--</div>-->
            <!--</div>-->
            <!--</div>-->



            <!--<button type="button" id="edit" class="btn btn-warning" data-toggle="tooltip" data-placement="right" title="Tooltip on right" data-content="Click to edit an existing reservation">Edit</button>-->

        </div>
        <hr>

    </form>

<script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
<script>
    $(document).ready(function () {
        check_for_zero();
    });
    function check_for_zero(){
        var cp=document.getElementById('capacity').value
        if (Number(cp) === 0)
        {
            document.getElementById('msg').innerHTML='Sorry. This time slot is completely booked.'
            document.getElementById('submit').disabled=true;
            document.getElementById('no_tables').innerHTML=''
        }
      
    }
    
    $("#tables").change(
        function(){
            var tables= $(this).val()
            console.log(tables)
            
            if(Number(tables) > Number(capacity)){
            document.getElementById('msg').innerHTML='Not enough tables are present to complete the reservation'
            document.getElementById('submit').disabled=true;
        }
        else{
            document.getElementById('msg').innerHTML=''
            document.getElementById('submit').disabled=false;
        }
    }
)
</script>
</body>

</html>